# **Дипломная работа “Облачное хранилище”**  
1. [Описание проекта](#1-описание-проекта)
2. [Запуск проекта](#2-запуск-проекта)
3. [Завершение работы](#3-завершение-работы)
---

## 1. Описание проекта
 
Разработан REST-сервис. Сервис предоставляет REST-интерфейс для загрузки файлов и вывода списка уже загруженных файлов пользователя.

Все запросы к сервису авторизованы. Заранее подготовленное веб-приложение (FRONT) подключается к разработанному сервису без доработок, а также использует функционал FRONT для авторизации, загрузки и вывода списка файлов пользователя.

## Требования к приложению

- Сервис предоставляет REST-интерфейс для интеграции с FRONT.
- Сервис реализовывает все методы, описанные в файле CloudServiceSpecification.yaml:
  1. Вывод списка файлов.
  2. Добавление файла.
  3. Удаление файла.
  4. Авторизация.
- Все настройки считываются из файла настроек (yml).
- Информация о пользователях сервиса (логины для авторизации) хранятся в базе данных.

## Требования к реализации

- Приложение разработано с использованием Spring Boot.
- Использован сборщик пакетов gradle/maven.
- Для запуска используется docker, docker-compose.
- Код размещён на Github.
- Код покрыт unit-тестами с использованием mockito.
- Добавлены интеграционные тесты с использованием testcontainers.

## Описание и запуск FRONT

1. Установите nodejs (версия не ниже 19.7.0) на компьютер, следуя инструкции: (https://nodejs.org/ru/download/current/).
2. Скачайте [FRONT](https://github.com/netology-code/jd-homeworks/tree/master/diploma/netology-diplom-frontend) (JavaScript).
3. Перейдите в папку FRONT приложения и все команды для запуска выполняйте из неё.
4. Следуя описанию README.md FRONT проекта, запустите nodejs-приложение (`npm install`, `npm run serve`).
5. По умолчанию FRONT запускается на порту 8081 и доступен по url в браузере `http://localhost:8081`. 
   
## Авторизация приложения

FRONT-приложение использует header `auth-token`, в котором отправляет токен (ключ-строка) для идентификации пользователя на BACKEND.
Для получения токена нужно пройти авторизацию на BACKEND и отправить на метод /login логин и пароль. В случае успешной проверки в ответ BACKEND должен вернуть json-объект
с полем `auth-token` и значением токена. Все дальнейшие запросы с FRONTEND, кроме метода /login, отправляются с этим header.
Для выхода из приложения нужно вызвать метод BACKEND /logout, который удалит/деактивирует токен. Последующие запросы с этим токеном будут не авторизованы и вернут код 401.

## 2. Запуск-проекта
### Запуск приложения (frontend vue + backend + postgres)
- Клонируем проект на свой ПК;
- Запускаем приложение Docker Desktop;
- Открываем проект в среде разработки IntelliJ IDEA/GIGA IDEA;
- Запускаем FRONT (в папке проекта FRONT запускаем терминал, далее команда npm run serve);
- Запускаем проект в среде разработки IntelliJ IDEA/GIGA IDEA.

### Для тестирования frontend vue + backend + postgresql нужно авторизовать пользователя:
 - Отправить POST запрос `http://localhost:8181/login`
 - JSON -> `{
"login": "user@test.ru",
"password": "user_test"
}` 

### Если в базе данных нет пользователя user@test.ru, или для регистрации нового пользователя: 
- Отправить POST запрос `http://localhost:8181/user/register`
- JSON -> `{
  "login": "user@test.ru",
  "password": "user_test"
  }`  

## 3. Завершение работы
- Выход из приложения: в терминале FRONT нажать "Ctrl+C"